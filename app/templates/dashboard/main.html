{% extends "layout.html" %}

{% block content %}
<fieldset class="space-y-4 bg-white dark:bg-gray-800 p-8 rounded-lg shadow-md w-1/2">
    <div class="flex flex-col md:flex-row md:justify-between md:items-center p-4">
        <legend class="text-2xl pb-2 font-bold border-b dark:text-white"> Tickets </legend>

        <!-- controles passam para baixo em telas pequenas -->
        <div class="flex flex-col md:flex-row items-center md:items-center gap-4 w-full md:w-auto mt-4 md:mt-0">
            <div class="flex w-full md:w-auto items-end gap-4 justify-end"> 

                <a href="" title="Criar novo ticket"
                    class="flex-shrink-0 inline-flex items-center justify-center w-10 h-10 text-white bg-purple-600 border border-transparent rounded-full shadow-sm hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 dark:focus:ring-offset-gray-800">
                    <span class="sr-only">Criar ticket</span>
                    <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                    </svg>
                </a>

            </div>
        </div>
    </div>

    <!-- tabela para desktop -->
    <div class="hidden md:block">
        <table class="w-full font-thin dark:text-gray-400 text-center">
            <thead class="uppercase text-gray-700 dark:text-gray-400">
                <tr>
                    <th scope="col" class="px-6 py-3">
                        <a href="#"
                            class="flex justify-center items-center hover:text-purple-500 transition-colors dark:text-white dark:hover:text-purple-500">
                            ID
                            {% if sort_by == 'id' %}
                            <svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l4-4 4 4m0 6l-4 4-4-4"></path>
                            
                                {% if direction == 'asc' %}
                                <path d="M5 15l7-7 7 7" />{% else %}
                                <path d="M19 9l-7 7-7-7" />{% endif %}
                            </svg>
                            {% endif %}
                        </a>
                    </th>
                    <th scope="col" class="px-6 py-3">
                        <a href="#"
                            class="flex justify-center items-center hover:text-purple-500 transition-colors dark:text-white dark:hover:text-purple-500">
                            T√≠tulo
                            {% if sort_by == 'title' %}
                            <svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l4-4 4 4m0 6l-4 4-4-4"></path>
                            
                                {% if direction == 'asc' %}
                                <path d="M5 15l7-7 7 7" />{% else %}
                                <path d="M19 9l-7 7-7-7" />{% endif %}
                            </svg>
                            {% endif %}
                        </a>
                    </th>
                    <th scope="col" class="px-6 py-3">
                        <a href="#"
                            class="flex justify-center items-center hover:text-purple-500 transition-colors dark:text-white dark:hover:text-purple-500">
                            Setor
                            {% if sort_by == 'sector_id' %}
                            <svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l4-4 4 4m0 6l-4 4-4-4"></path>
                            
                                {% if direction == 'asc' %}
                                <path d="M5 15l7-7 7 7" />{% else %}
                                <path d="M19 9l-7 7-7-7" />{% endif %}
                            </svg>
                            {% endif %}
                        </a>
                    </th>
                    <th scope="col" class="px-6 py-3">
                        <a href="#"
                            class="flex justify-center items-center hover:text-purple-500 transition-colors dark:text-white dark:hover:text-purple-500">
                            Assunto
                            {% if sort_by == 'subject_id' %}
                            <svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l4-4 4 4m0 6l-4 4-4-4"></path>
                            
                                {% if direction == 'asc' %}
                                <path d="M5 15l7-7 7 7" />{% else %}
                                <path d="M19 9l-7 7-7-7" />{% endif %}
                            </svg>
                            {% endif %}
                        </a>
                    </th>
                    <th scope="col" class="px-6 py-3">
                        <a href="#"
                            class="flex justify-center items-center hover:text-purple-500 transition-colors dark:text-white dark:hover:text-purple-500">
                            Criado por
                            {% if sort_by == 'creator_id' %}
                            <svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l4-4 4 4m0 6l-4 4-4-4"></path>
                            
                                {% if direction == 'asc' %}
                                <path d="M5 15l7-7 7 7" />{% else %}
                                <path d="M19 9l-7 7-7-7" />{% endif %}
                            </svg>
                            {% endif %}
                        </a>
                    </th>
                    <th scope="col" class="px-6 py-3">
                        <a href="#"
                            class="flex justify-center items-center hover:text-purple-500 transition-colors dark:text-white dark:hover:text-purple-500">
                            Status
                            {% if sort_by == 'status' %}
                            <svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l4-4 4 4m0 6l-4 4-4-4"></path>
                            
                                {% if direction == 'asc' %}
                                <path d="M5 15l7-7 7 7" />{% else %}
                                <path d="M19 9l-7 7-7-7" />{% endif %}
                            </svg>
                            {% endif %}
                        </a>
                    </th>
                    <th scope="col" class="w-1/12 px-6 py-3 text-center transition-colors dark:text-white"> A√ß√µes </th>
                </tr>
            </thead>

            <tbody x-data="{ editId: null }">
                {% for ticket in tickets %}
                <tr class="dark:border-gray-700 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors">
                    <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white first:rounded-l-lg last:rounded-r-lg text-center" style="border-left: 3px solid {{ ticket.priority.color }};">
                        {{ ticket.id }}
                    </td>

                    <td class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white first:rounded-l-lg last:rounded-r-lg text-center">
                        {{ ticket.title }}
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="7" class="text-center py-4"> Nenhum ticket atribu√≠do a voc√™, ainda üòÅ. </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</fieldset>
{% endblock %}